{% extends "admin/base_site.html" %}
{% block content %}
<div class="dg-container" style="padding: 20px;">
    <h1>Dashboard (График - Live)</h1>
    <hr>
    <div id="charts" style="padding:15px; border:1px solid #ddd; border-radius:10px; background: #fff;">
      Өгөгдлийг ачаалж байна...
    </div>
</div>

<script>
(async () => {
  try {
    const res = await fetch("/django-admin/api/reports/charts/?scope=1");
    if (!res.ok) throw new Error("API алдаа");
    const data = await res.json();
    document.getElementById("charts").innerHTML =
      `<pre style="white-space:pre-wrap; background:#f4f4f4; padding:10px;">${JSON.stringify(data, null, 2)}</pre>`;
  } catch (e) {
    document.getElementById("charts").innerHTML = "Өгөгдөл татахад алдаа гарлаа: " + e.message;
  }
})();
</script>
{% endblock %}
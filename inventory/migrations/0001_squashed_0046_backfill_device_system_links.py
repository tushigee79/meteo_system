# Generated by Django 4.2.8 on 2026-02-08 07:28

import datetime
from django.conf import settings
from django.db import migrations, models
import django.db.migrations.operations.special
import django.db.models.deletion
import django.utils.timezone
import uuid


# ---------------------------------------------------------------------------
# Manual porting helpers (auto-inserted)
# ---------------------------------------------------------------------------
from django.utils import timezone

def _noop(apps, schema_editor):
    """No-op for squashed RunPython steps that were already applied in existing DBs."""
    return

def forwards_0016_location_type_normalize(apps, schema_editor):
    Location = apps.get_model("inventory", "Location")
    # METEO -> WEATHER
    Location.objects.filter(location_type="METEO").update(location_type="WEATHER")
    # empty/NULL/"-" -> OTHER
    Location.objects.filter(location_type__in=["", "-", None]).update(location_type="OTHER")

def backwards_0016_location_type_normalize(apps, schema_editor):
    Location = apps.get_model("inventory", "Location")
    Location.objects.filter(location_type="WEATHER").update(location_type="METEO")

def forwards_0021_workflow_and_audit_event(apps, schema_editor):
    # NOTE: This was a one-time data/permission backfill in the original history.
    # For existing DBs (where we run --fake), it has already been applied.
    return

def backfill_0029_qr_tokens(apps, schema_editor):
    Device = apps.get_model("inventory", "Device")
    qs = Device.objects.filter(qr_token__isnull=True)
    # On fresh installs, this may be empty; keep it safe for large tables.
    for d in qs.only("id").iterator(chunk_size=2000):
        d.qr_token = uuid.uuid4()
        d.save(update_fields=["qr_token"])

def backfill_0030_qr_expiry(apps, schema_editor):
    # Expiry field was later removed in the migration history; keep as noop-safe.
    return

def backfill_0046_device_system_links(apps, schema_editor):
    # Original migration linked components (Device) to MeasurementSystem.
    # In existing DBs it has already run; for fresh installs it's optional.
    return

# Functions from the following migrations need manual copying.
# Move them and any dependencies into this file, then update the
# RunPython operations to refer to the local versions:
# inventory.migrations.0016_location_type_normalize
# inventory.migrations.0021_workflow_and_audit_event
# inventory.migrations.0029_device_qr_token_alter_device_kind
# inventory.migrations.0030_device_qr_security
# inventory.migrations.0046_backfill_device_system_links

class Migration(migrations.Migration):

    replaces = [('inventory', '0001_initial'), ('inventory', '0002_instrumentcatalog_remove_masterdevice_category_and_more'), ('inventory', '0003_device_kind'), ('inventory', '0004_alter_organization_aimag_alter_organization_is_ub_and_more'), ('inventory', '0005_location_district_name_alter_location_sum_ref'), ('inventory', '0006_userprofile_must_change_password'), ('inventory', '0007_alter_calibrationrecord_options_alter_device_status_and_more'), ('inventory', '0008_alter_device_kind_alter_instrumentcatalog_kind'), ('inventory', '0009_devicesystemprofile'), ('inventory', '0010_remove_devicefault_device_and_more'), ('inventory', '0011_alter_devicesystemprofile_options_and_more'), ('inventory', '0012_alter_device_kind_alter_instrumentcatalog_kind_and_more'), ('inventory', '0013_alter_device_kind_alter_instrumentcatalog_kind'), ('inventory', '0014_alter_device_options_alter_sumduureg_is_ub_district'), ('inventory', '0015_alter_device_kind_alter_instrumentcatalog_kind_and_more'), ('inventory', '0016_location_type_normalize'), ('inventory', '0017_alter_instrumentcatalog_options_and_more'), ('inventory', '0018_add_service_and_control'), ('inventory', '0019_add_multi_evidence'), ('inventory', '0020_add_workflow_status'), ('inventory', '0021_alter_controladjustment_options_and_more'), ('inventory', '0022_alter_controladjustment_options_and_more'), ('inventory', '0021_workflow_and_audit_event'), ('inventory', '0023_merge_20260126_1316'), ('inventory', '0024_alter_controladjustment_options_and_more'), ('inventory', '0021_hybrid_workflow_flags'), ('inventory', '0025_merge_20260128_1711'), ('inventory', '0002_workflow_daily_agg'), ('inventory', '0026_merge_20260129_1419'), ('inventory', '0027_devicemovement_alter_device_options_and_more'), ('inventory', '0028_alter_device_options'), ('inventory', '0029_device_qr_token_alter_device_kind'), ('inventory', '0030_device_qr_security'), ('inventory', '0031_alter_device_qr_token'), ('inventory', '0032_instrumentcatalog_verification_cycle_months_and_more'), ('inventory', '0033_device_last_verification_date_and_more'), ('inventory', '0032_device_last_verification_date_and_more'), ('inventory', '0034_merge_20260202_2153'), ('inventory', '0035_delete_calibrationworkflow'), ('inventory', '0036_device_commissioned_date_device_inventory_code_and_more'), ('inventory', '0037_alter_device_kind_alter_instrumentcatalog_kind_and_more'), ('inventory', '0038_alter_aimag_options_alter_auditevent_options_and_more'), ('inventory', '0039_remove_device_qr_expires_at_and_more'), ('inventory', '0040_alter_aimag_options_alter_authauditlog_options_and_more'), ('inventory', '0043_add_measurement_system'), ('inventory', '0041_alter_controladjustment_options_and_more'), ('inventory', '0042_alter_aimag_options_alter_controladjustment_options_and_more'), ('inventory', '0044_merge_20260206_1309'), ('inventory', '0045_alter_measurementsystem_options_and_more'), ('inventory', '0046_backfill_device_system_links')]

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Aimag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Аймаг/Нийслэлийн нэр')),
                ('code', models.CharField(blank=True, default='', max_length=20, verbose_name='Код')),
            ],
            options={
                'verbose_name': 'Аймаг/Нийслэл',
                'verbose_name_plural': 'Аймаг/Нийслэл',
            },
        ),
        migrations.CreateModel(
            name='Device',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('serial_number', models.CharField(max_length=100, unique=True, verbose_name='Серийн дугаар')),
                ('other_device_name', models.CharField(blank=True, max_length=255, null=True, verbose_name='Бусад нэр')),
                ('status', models.CharField(choices=[('Active', 'Ашиглагдаж буй'), ('Broken', 'Эвдрэлтэй'), ('Repair', 'Засварт байгаа'), ('Spare', 'Нөөцөд'), ('Retired', 'Хасагдсан')], default='Active', max_length=15, verbose_name='Төлөв')),
                ('installation_date', models.DateField(blank=True, null=True, verbose_name='Суурилуулсан')),
                ('lifespan_years', models.PositiveIntegerField(default=10, verbose_name='Хугацаа (жил)')),
                ('valid_until', models.DateField(blank=True, null=True, verbose_name='Баталгаажуулалт дуусах')),
                ('retirement_date', models.DateField(blank=True, null=True, verbose_name='Хасагдсан огноо')),
                ('retirement_reason', models.TextField(blank=True, null=True, verbose_name='Хасагдсан шалтгаан')),
            ],
            options={
                'verbose_name': 'Багаж',
                'verbose_name_plural': 'Багаж',
            },
        ),
        migrations.CreateModel(
            name='DeviceCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Ангиллын нэр')),
            ],
            options={
                'verbose_name': 'Багажны ангилал',
                'verbose_name_plural': 'Багажны ангилал',
            },
        ),
        migrations.CreateModel(
            name='Location',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Нэр')),
                ('location_type', models.CharField(choices=[('METEO', 'METEO'), ('HYDRO', 'HYDRO'), ('AWS', 'AWS'), ('OTHER', 'Бусад')], default='METEO', max_length=20, verbose_name='Төрөл')),
                ('wmo_index', models.CharField(blank=True, max_length=10, null=True, verbose_name='WMO индекс')),
                ('latitude', models.FloatField(blank=True, null=True, verbose_name='Өргөрөг')),
                ('longitude', models.FloatField(blank=True, null=True, verbose_name='Уртраг')),
                ('aimag_ref', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.aimag', verbose_name='Аймаг')),
            ],
            options={
                'verbose_name': 'Байршил',
                'verbose_name_plural': 'Байршил',
            },
        ),
        migrations.CreateModel(
            name='MasterDevice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Стандарт нэр')),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='master_devices', to='inventory.devicecategory')),
            ],
            options={
                'verbose_name': 'Стандарт багаж',
                'verbose_name_plural': 'Стандарт багаж',
            },
        ),
        migrations.CreateModel(
            name='Organization',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True, verbose_name='Байгууллагын нэр')),
                ('org_type', models.CharField(choices=[('POLICY', 'ЦУОШГ'), ('CAL_LAB', 'БОХЗТЛ'), ('OBS_CENTER', 'УЦУОШТ')], default='OBS_CENTER', max_length=20, verbose_name='Төрөл')),
                ('is_ub', models.BooleanField(default=False, verbose_name='УБ хот уу?')),
                ('aimag', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.aimag', verbose_name='Аймаг')),
            ],
            options={
                'verbose_name': 'Байгууллага',
                'verbose_name_plural': 'Байгууллагууд',
            },
        ),
        migrations.CreateModel(
            name='StandardInstrument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Эталон нэр')),
                ('serial_number', models.CharField(max_length=100, verbose_name='Серийн дугаар')),
                ('accuracy_class', models.CharField(blank=True, max_length=50, null=True)),
                ('last_calibration', models.DateField(blank=True, null=True)),
                ('other_standard_name', models.CharField(blank=True, max_length=255, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.CharField(default='AIMAG_ENG', max_length=20)),
                ('aimag', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.aimag')),
                ('org', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.organization')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='SumDuureg',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Сум/Дүүргийн нэр')),
                ('code', models.CharField(blank=True, default='', max_length=20, verbose_name='Код')),
                ('aimag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sums', to='inventory.aimag')),
            ],
            options={
                'verbose_name': 'Сум/Дүүрэг',
                'verbose_name_plural': 'Сум/Дүүрэг',
                'unique_together': {('aimag', 'name')},
            },
        ),
        migrations.CreateModel(
            name='SparePartOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order_no', models.CharField(max_length=20, unique=True, verbose_name='Захиалгын №')),
                ('status', models.CharField(default='Draft', max_length=20, verbose_name='Төлөв')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Үүсгэсэн')),
                ('aimag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.aimag', verbose_name='Аймаг')),
                ('station', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.location', verbose_name='Станц')),
            ],
        ),
        migrations.CreateModel(
            name='SparePartItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('part_name', models.CharField(max_length=255, verbose_name='Сэлбэг')),
                ('quantity', models.PositiveIntegerField(default=1, verbose_name='Тоо')),
                ('device_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.masterdevice')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='inventory.sparepartorder')),
            ],
        ),
        migrations.CreateModel(
            name='Request',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('request_type', models.CharField(max_length=20)),
                ('status', models.CharField(default='DRAFT', max_length=20)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('decision_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='decided', to='inventory.organization')),
                ('from_org', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.organization')),
            ],
        ),
        migrations.CreateModel(
            name='MaintenanceLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('performed_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('performer_type', models.CharField(choices=[('ENGINEER', 'Инженер'), ('ORG', 'Байгууллага')], max_length=20)),
                ('performer_name', models.CharField(max_length=255)),
                ('result', models.CharField(default='OK', max_length=30)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.device', verbose_name='Багаж')),
            ],
        ),
        migrations.AddField(
            model_name='location',
            name='owner_org',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.organization', verbose_name='Хариуцагч'),
        ),
        migrations.AddField(
            model_name='location',
            name='sum_ref',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.sumduureg', verbose_name='Сум'),
        ),
        migrations.CreateModel(
            name='DeviceFault',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fault_description', models.TextField(verbose_name='Тайлбар')),
                ('reported_date', models.DateField(default=datetime.date.today, verbose_name='Мэдээлсэн')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.device', verbose_name='Багаж')),
            ],
        ),
        migrations.AddField(
            model_name='device',
            name='location',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='devices', to='inventory.location', verbose_name='Байршил'),
        ),
        migrations.AddField(
            model_name='device',
            name='master_device',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.masterdevice', verbose_name='Төрөл'),
        ),
        migrations.CreateModel(
            name='DeploymentHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('installed_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('removed_at', models.DateTimeField(blank=True, null=True)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.device', verbose_name='Багаж')),
                ('from_location', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='from_loc', to='inventory.location')),
                ('to_location', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='to_loc', to='inventory.location')),
            ],
        ),
        migrations.CreateModel(
            name='CalibrationRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('issue_date', models.DateField(verbose_name='Олгосон')),
                ('expiry_date', models.DateField(verbose_name='Дуусах')),
                ('certificate_no', models.CharField(max_length=120, verbose_name='Гэрчилгээ №')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.device', verbose_name='Багаж')),
                ('lab_org', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.organization')),
                ('standard_used', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.standardinstrument')),
            ],
        ),
        migrations.CreateModel(
            name='InstrumentCatalog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('kind', models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл')),
                ('code', models.CharField(blank=True, default='', help_text='ДЦУБ дотоод код', max_length=50, verbose_name='Код')),
                ('name_mn', models.CharField(max_length=255, verbose_name='Нэр (Монгол)')),
                ('unit', models.CharField(blank=True, default='', max_length=50, verbose_name='Хэмжих нэгж')),
                ('is_active', models.BooleanField(default=True, verbose_name='Идэвхтэй')),
                ('sort_order', models.PositiveIntegerField(default=0, verbose_name='Эрэмбэ')),
            ],
            options={
                'verbose_name': 'ДЦУБ Каталог',
                'verbose_name_plural': 'ДЦУБ Каталог',
                'ordering': ['sort_order', 'kind', 'name_mn'],
                'unique_together': {('kind', 'name_mn')},
            },
        ),
        migrations.RemoveField(
            model_name='masterdevice',
            name='category',
        ),
        migrations.RemoveField(
            model_name='request',
            name='decision_by',
        ),
        migrations.RemoveField(
            model_name='request',
            name='from_org',
        ),
        migrations.AlterModelOptions(
            name='calibrationrecord',
            options={'verbose_name': 'Калибровка', 'verbose_name_plural': 'Калибровка'},
        ),
        migrations.AlterModelOptions(
            name='device',
            options={'verbose_name': 'Багаж/Эталон', 'verbose_name_plural': 'Багаж/Эталон'},
        ),
        migrations.RemoveField(
            model_name='calibrationrecord',
            name='lab_org',
        ),
        migrations.RemoveField(
            model_name='calibrationrecord',
            name='standard_used',
        ),
        migrations.RemoveField(
            model_name='device',
            name='master_device',
        ),
        migrations.RemoveField(
            model_name='device',
            name='other_device_name',
        ),
        migrations.RemoveField(
            model_name='device',
            name='retirement_date',
        ),
        migrations.RemoveField(
            model_name='device',
            name='retirement_reason',
        ),
        migrations.RemoveField(
            model_name='device',
            name='valid_until',
        ),
        migrations.RemoveField(
            model_name='maintenancelog',
            name='performer_type',
        ),
        migrations.RemoveField(
            model_name='sparepartitem',
            name='device_type',
        ),
        migrations.RemoveField(
            model_name='sparepartorder',
            name='station',
        ),
        migrations.AddField(
            model_name='device',
            name='other_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Бусад нэр'),
        ),
        migrations.AddField(
            model_name='devicefault',
            name='status',
            field=models.CharField(choices=[('Open', 'Нээлттэй'), ('Closed', 'Шийдвэрлэсэн')], default='Open', max_length=20),
        ),
        migrations.AlterField(
            model_name='calibrationrecord',
            name='expiry_date',
            field=models.DateField(verbose_name='Дуусах огноо'),
        ),
        migrations.AlterField(
            model_name='calibrationrecord',
            name='issue_date',
            field=models.DateField(verbose_name='Олгосон огноо'),
        ),
        migrations.AlterField(
            model_name='device',
            name='lifespan_years',
            field=models.PositiveIntegerField(default=10, verbose_name='Ашиглалтын хугацаа (жил)'),
        ),
        migrations.AlterField(
            model_name='maintenancelog',
            name='result',
            field=models.TextField(),
        ),
        migrations.AlterField(
            model_name='sparepartitem',
            name='part_name',
            field=models.CharField(max_length=255),
        ),
        migrations.AlterField(
            model_name='sparepartitem',
            name='quantity',
            field=models.PositiveIntegerField(default=1),
        ),
        migrations.AlterField(
            model_name='sparepartorder',
            name='aimag',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.aimag'),
        ),
        migrations.AlterField(
            model_name='sparepartorder',
            name='created_at',
            field=models.DateTimeField(default=django.utils.timezone.now),
        ),
        migrations.AlterField(
            model_name='sparepartorder',
            name='status',
            field=models.CharField(default='Draft', max_length=20),
        ),
        migrations.DeleteModel(
            name='DeploymentHistory',
        ),
        migrations.DeleteModel(
            name='DeviceCategory',
        ),
        migrations.DeleteModel(
            name='MasterDevice',
        ),
        migrations.DeleteModel(
            name='Request',
        ),
        migrations.DeleteModel(
            name='StandardInstrument',
        ),
        migrations.AddField(
            model_name='device',
            name='catalog_item',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='devices', to='inventory.instrumentcatalog', verbose_name='ДЦУБ жагсаалт'),
        ),
        migrations.AddField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='aimag',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.aimag', verbose_name='Аймаг/Нийслэл'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='is_ub',
            field=models.BooleanField(default=False, verbose_name='Улаанбаатар хот уу?'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='org_type',
            field=models.CharField(choices=[('CENTER', 'НЦУТ'), ('CAL_LAB', 'БОХЗТЛ'), ('OBS_CENTER', 'УЦУОШТ')], default='OBS_CENTER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AddField(
            model_name='location',
            name='district_name',
            field=models.CharField(blank=True, default='', max_length=100, verbose_name='УБ дүүрэг'),
        ),
        migrations.AlterField(
            model_name='location',
            name='sum_ref',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.sumduureg', verbose_name='Сум/Дүүрэг'),
        ),
        migrations.AddField(
            model_name='userprofile',
            name='must_change_password',
            field=models.BooleanField(default=False),
        ),
        migrations.AlterModelOptions(
            name='calibrationrecord',
            options={},
        ),
        migrations.AlterField(
            model_name='device',
            name='status',
            field=models.CharField(choices=[('Active', 'Ашиглагдаж буй'), ('Broken', 'Эвдрэлтэй'), ('Repair', 'Засварт'), ('Spare', 'Нөөц'), ('Retired', 'Хасагдсан')], default='Active', max_length=15, verbose_name='Төлөв'),
        ),
        migrations.CreateModel(
            name='AuthAuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('username', models.CharField(blank=True, default='', max_length=150)),
                ('action', models.CharField(choices=[('LOGIN_SUCCESS', 'LOGIN_SUCCESS'), ('LOGIN_FAILED', 'LOGIN_FAILED'), ('FORCED_PW_CHANGE', 'FORCED_PW_CHANGE'), ('PASSWORD_CHANGED', 'PASSWORD_CHANGED')], max_length=32)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, default='')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('extra', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('SYSTEM', 'Том систем'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('SYSTEM', 'Том систем'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл'),
        ),
        migrations.CreateModel(
            name='DeviceSystemProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vendor', models.CharField(blank=True, default='', max_length=255, verbose_name='Үйлдвэрлэгч/Нийлүүлэгч')),
                ('model_name', models.CharField(blank=True, default='', max_length=255, verbose_name='Загвар/Модель')),
                ('serial_system', models.CharField(blank=True, default='', max_length=255, verbose_name='Системийн серийн №')),
                ('firmware', models.CharField(blank=True, default='', max_length=255, verbose_name='Firmware/Software хувилбар')),
                ('subsystems', models.TextField(blank=True, default='', verbose_name='Subsystems/Бүрэлдэхүүн хэсэг')),
                ('lifecycle', models.CharField(choices=[('PLANNED', 'Төлөвлөсөн'), ('ACTIVE', 'Ашиглалтад'), ('LIMITED', 'Хязгаарлагдмал'), ('DOWN', 'Зогссон'), ('RETIRED', 'Ашиглалтаас хассан')], default='ACTIVE', max_length=20, verbose_name='Lifecycle төлөв')),
                ('installed_at', models.DateField(blank=True, null=True, verbose_name='Суурилуулсан огноо')),
                ('note', models.TextField(blank=True, default='', verbose_name='Тайлбар')),
                ('device', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='system_profile', to='inventory.device', verbose_name='Төхөөрөмж')),
            ],
            options={
                'verbose_name': 'Том системийн профайл',
                'verbose_name_plural': 'Том системийн профайлууд',
            },
        ),
        migrations.RemoveField(
            model_name='devicefault',
            name='device',
        ),
        migrations.RemoveField(
            model_name='maintenancelog',
            name='device',
        ),
        migrations.AddField(
            model_name='devicesystemprofile',
            name='system_type',
            field=models.CharField(choices=[('RADAR', 'Цаг уурын радар'), ('AEROLOGY', 'Аэрологийн систем'), ('AWS', 'Автомат станц (AWS)'), ('OTHER', 'Бусад том систем')], default='OTHER', max_length=20, verbose_name='Системийн төрөл (Subtype)'),
        ),
        migrations.AlterField(
            model_name='devicesystemprofile',
            name='subsystems',
            field=models.JSONField(blank=True, default=list, verbose_name='Subsystems (JSON жагсаалт)'),
        ),
        migrations.DeleteModel(
            name='CalibrationRecord',
        ),
        migrations.DeleteModel(
            name='DeviceFault',
        ),
        migrations.DeleteModel(
            name='MaintenanceLog',
        ),
        migrations.AlterModelOptions(
            name='devicesystemprofile',
            options={'verbose_name': 'Иж бүрэн системийн профайл', 'verbose_name_plural': 'Иж бүрэн системийн профайлууд'},
        ),
        migrations.AddField(
            model_name='sumduureg',
            name='is_ub_district',
            field=models.BooleanField(default=False, verbose_name='УБ-ын дүүрэг эсэх'),
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('SYSTEM', 'Иж бүрэн систем'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('SYSTEM', 'Иж бүрэн систем'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('RADAR', 'Радарын станц'), ('AEROLOGY', 'Аэрологийн станц'), ('AWS', 'Цаг уурын автомат станц (AWS)'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('DEVICE', 'Багаж'), ('RADAR', 'Радарын станц'), ('AEROLOGY', 'Аэрологийн станц'), ('AWS', 'Цаг уурын автомат станц (AWS)'), ('OTHER', 'Бусад')], default='DEVICE', max_length=10, verbose_name='Төрөл'),
        ),
        migrations.DeleteModel(
            name='DeviceSystemProfile',
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AGRI', 'Хөдөө аж ахуй'), ('RADAR', 'Радарын станц'), ('AEROLOGY', 'Аэрологийн станц'), ('AWS', 'Цаг уурын автомат станц (AWS)'), ('OTHER', 'Бусад')], default='WEATHER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('ETALON', 'Эталон'), ('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AGRI', 'Хөдөө аж ахуй'), ('RADAR', 'Радарын станц'), ('AEROLOGY', 'Аэрологийн станц'), ('AWS', 'Цаг уурын автомат станц (AWS)'), ('OTHER', 'Бусад')], default='WEATHER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AlterModelOptions(
            name='device',
            options={'verbose_name': 'Хэмжих хэрэгсэл', 'verbose_name_plural': 'Хэмжих хэрэгсэл'},
        ),
        migrations.AlterField(
            model_name='sumduureg',
            name='is_ub_district',
            field=models.BooleanField(default=False, verbose_name='УБ-ын 9 дүүрэг үү?'),
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('ETALON', 'Эталон'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('OTHER', 'Бусад')], default='WEATHER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('ETALON', 'Эталон'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('OTHER', 'Бусад')], default='WEATHER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='location',
            name='location_type',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('ETALON', 'Эталон'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('OTHER', 'Бусад')], default='WEATHER', max_length=20, verbose_name='Байршлын төрөл'),
        ),
        migrations.RunPython(
            code=forwards_0016_location_type_normalize,
            reverse_code=backwards_0016_location_type_normalize,
        ),
        migrations.AlterModelOptions(
            name='instrumentcatalog',
            options={'ordering': ['sort_order', 'code'], 'verbose_name': 'ДЦУБ Каталог', 'verbose_name_plural': 'ДЦУБ Каталог'},
        ),
        migrations.AlterUniqueTogether(
            name='instrumentcatalog',
            unique_together=set(),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='code',
            field=models.CharField(max_length=100, unique=True, verbose_name='Код'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='is_active',
            field=models.BooleanField(default=True),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'ХАА'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], default='OTHER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='name_mn',
            field=models.CharField(max_length=255, verbose_name='Нэр'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='sort_order',
            field=models.IntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='unit',
            field=models.CharField(blank=True, default='', max_length=50, verbose_name='Нэгж'),
        ),
        migrations.CreateModel(
            name='MaintenanceService',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(verbose_name='Огноо')),
                ('reason', models.CharField(choices=[('NORMAL', 'Хэвийн засвар үйлчилгээ'), ('LIMITED', 'Хязгаарлагдмал ажиллагаа'), ('NOT_WORKING', 'Ажиллагаагүй болсон')], default='NORMAL', max_length=20, verbose_name='Засвар хийсэн шалтгаан')),
                ('performer_type', models.CharField(choices=[('ENGINEER', 'Инженер'), ('ORG', 'Байгууллага')], default='ENGINEER', max_length=10, verbose_name='Хийсэн этгээд (төрөл)')),
                ('performer_engineer_name', models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нэр)')),
                ('performer_org_name', models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нэр)')),
                ('evidence', models.FileField(blank=True, null=True, upload_to='evidence/maintenance/%Y/%m/', verbose_name='Нотлох баримт (файл)')),
                ('note', models.TextField(blank=True, default='', verbose_name='Тайлбар / тэмдэглэл')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='maintenance_services', to='inventory.device', verbose_name='Багаж / Төхөөрөмж')),
            ],
            options={
                'verbose_name': 'Засвар, үйлчилгээ',
                'verbose_name_plural': 'Засвар, үйлчилгээ',
                'ordering': ['-date', '-id'],
            },
        ),
        migrations.CreateModel(
            name='ControlAdjustment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(verbose_name='Огноо')),
                ('result', models.CharField(choices=[('PASS', 'PASS - Хэвийн'), ('LIMITED', 'Хязгаарлагдмал'), ('FAIL', 'FAIL - Ажиллагаагүй')], default='PASS', max_length=20, verbose_name='Үр дүн')),
                ('performer_type', models.CharField(choices=[('ENGINEER', 'Инженер'), ('ORG', 'Байгууллага')], default='ENGINEER', max_length=10, verbose_name='Хийсэн этгээд (төрөл)')),
                ('performer_engineer_name', models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нэр)')),
                ('performer_org_name', models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нэр)')),
                ('evidence', models.FileField(blank=True, null=True, upload_to='evidence/control/%Y/%m/', verbose_name='Нотлох баримт (файл)')),
                ('note', models.TextField(blank=True, default='', verbose_name='Тайлбар / тэмдэглэл')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='control_adjustments', to='inventory.device', verbose_name='Багаж / Төхөөрөмж')),
            ],
            options={
                'verbose_name': 'Хяналт, тохируулга',
                'verbose_name_plural': 'Хяналт, тохируулга',
                'ordering': ['-date', '-id'],
            },
        ),
        migrations.CreateModel(
            name='MaintenanceEvidence',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to='evidence/maintenance/%Y/%m/', verbose_name='Нотлох баримт (файл)')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('service', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evidences', to='inventory.maintenanceservice', verbose_name='Засвар, үйлчилгээ')),
            ],
            options={
                'verbose_name': 'Засварын нотлох баримт',
                'verbose_name_plural': 'Засварын нотлох баримтууд',
                'ordering': ['-uploaded_at', '-id'],
            },
        ),
        migrations.CreateModel(
            name='ControlEvidence',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to='evidence/control/%Y/%m/', verbose_name='Нотлох баримт (файл)')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('control', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evidences', to='inventory.controladjustment', verbose_name='Хяналт, тохируулга')),
            ],
            options={
                'verbose_name': 'Хяналтын нотлох баримт',
                'verbose_name_plural': 'Хяналтын нотлох баримтууд',
                'ordering': ['-uploaded_at', '-id'],
            },
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=20),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=20),
        ),
        migrations.AlterModelOptions(
            name='controladjustment',
            options={'ordering': ['-date', '-id'], 'verbose_name': 'Хяналт, тохируулга', 'verbose_name_plural': 'Хяналт, тохируулга'},
        ),
        migrations.AlterModelOptions(
            name='maintenanceservice',
            options={'ordering': ['-date', '-id'], 'verbose_name': 'Засвар, үйлчилгээ', 'verbose_name_plural': 'Засвар, үйлчилгээ'},
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='approved_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Баталсан огноо'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='approved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ca_approved', to=settings.AUTH_USER_MODEL, verbose_name='Баталсан хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='reject_reason',
            field=models.TextField(blank=True, default='', verbose_name='Reject шалтгаан'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='rejected_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Татгалзсан огноо'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='rejected_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ca_rejected', to=settings.AUTH_USER_MODEL, verbose_name='Татгалзсан хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='submitted_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Илгээсэн огноо'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='submitted_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ca_submitted', to=settings.AUTH_USER_MODEL, verbose_name='Илгээсэн хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='approved_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Баталсан огноо'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='approved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ms_approved', to=settings.AUTH_USER_MODEL, verbose_name='Баталсан хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='reject_reason',
            field=models.TextField(blank=True, default='', verbose_name='Reject шалтгаан'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='rejected_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Татгалзсан огноо'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='rejected_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ms_rejected', to=settings.AUTH_USER_MODEL, verbose_name='Татгалзсан хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='submitted_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Илгээсэн огноо'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='submitted_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ms_submitted', to=settings.AUTH_USER_MODEL, verbose_name='Илгээсэн хэрэглэгч'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.CreateModel(
            name='AuditEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('CREATE', 'CREATE'), ('UPDATE', 'UPDATE'), ('DELETE', 'DELETE'), ('SUBMIT', 'SUBMIT'), ('APPROVE', 'APPROVE'), ('REJECT', 'REJECT'), ('LIFECYCLE', 'LIFECYCLE'), ('NOTIFY', 'NOTIFY')], max_length=20, verbose_name='Үйлдэл')),
                ('model_label', models.CharField(max_length=100, verbose_name='Model')),
                ('object_id', models.CharField(blank=True, default='', max_length=50, verbose_name='Object ID')),
                ('object_repr', models.CharField(blank=True, default='', max_length=255, verbose_name='Object')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('changes', models.JSONField(blank=True, default=dict)),
                ('actor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_events', to=settings.AUTH_USER_MODEL, verbose_name='Хэрэглэгч')),
            ],
            options={
                'verbose_name': 'Audit event',
                'verbose_name_plural': 'Audit events',
                'ordering': ['-created_at', '-id'],
            },
        ),
        migrations.CreateModel(
            name='AuditEvent',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('CREATE', 'CREATE'), ('UPDATE', 'UPDATE'), ('DELETE', 'DELETE'), ('SUBMIT', 'SUBMIT'), ('APPROVE', 'APPROVE'), ('REJECT', 'REJECT'), ('LIFECYCLE', 'LIFECYCLE'), ('NOTIFY', 'NOTIFY')], max_length=20, verbose_name='Үйлдэл')),
                ('model_label', models.CharField(max_length=100, verbose_name='Model')),
                ('object_id', models.CharField(blank=True, default='', max_length=50, verbose_name='Object ID')),
                ('object_repr', models.CharField(blank=True, default='', max_length=255, verbose_name='Object')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('changes', models.JSONField(blank=True, default=dict)),
                ('actor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_events', to=settings.AUTH_USER_MODEL, verbose_name='Хэрэглэгч')),
            ],
            options={
                'ordering': ['-created_at', '-id'],
                'verbose_name': 'Audit event',
                'verbose_name_plural': 'Audit events',
            },
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='submitted_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Илгээсэн огноо'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='approved_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Баталсан огноо'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='rejected_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Татгалзсан огноо'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='reject_reason',
            field=models.TextField(blank=True, default='', verbose_name='Reject шалтгаан'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='submitted_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ms_submitted', to=settings.AUTH_USER_MODEL, verbose_name='Илгээсэн хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='approved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ms_approved', to=settings.AUTH_USER_MODEL, verbose_name='Баталсан хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='rejected_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ms_rejected', to=settings.AUTH_USER_MODEL, verbose_name='Татгалзсан хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='submitted_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Илгээсэн огноо'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='approved_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Баталсан огноо'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='rejected_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Татгалзсан огноо'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='reject_reason',
            field=models.TextField(blank=True, default='', verbose_name='Reject шалтгаан'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='submitted_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ca_submitted', to=settings.AUTH_USER_MODEL, verbose_name='Илгээсэн хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='approved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ca_approved', to=settings.AUTH_USER_MODEL, verbose_name='Баталсан хэрэглэгч'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='rejected_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ca_rejected', to=settings.AUTH_USER_MODEL, verbose_name='Татгалзсан хэрэглэгч'),
        ),
        migrations.RunPython(
            code=forwards_0021_workflow_and_audit_event,
            reverse_code=django.db.migrations.operations.special.RunPython.noop,
        ),
        migrations.AlterModelOptions(
            name='controladjustment',
            options={'ordering': ['-date', '-id'], 'permissions': [('can_approve_workflow', 'Can approve/reject workflow')], 'verbose_name': 'Хяналт, тохируулга', 'verbose_name_plural': 'Хяналт, тохируулга'},
        ),
        migrations.AlterModelOptions(
            name='maintenanceservice',
            options={'ordering': ['-date', '-id'], 'permissions': [('can_approve_workflow', 'Can approve/reject workflow')], 'verbose_name': 'Засвар, үйлчилгээ', 'verbose_name_plural': 'Засвар, үйлчилгээ'},
        ),
        migrations.AlterField(
            model_name='auditevent',
            name='id',
            field=models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID'),
        ),
        migrations.CreateModel(
            name='WorkflowAuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('APPROVE', 'APPROVE'), ('REJECT', 'REJECT')], max_length=10, verbose_name='Үйлдэл')),
                ('model_name', models.CharField(max_length=120, verbose_name='Model нэр')),
                ('record_id', models.PositiveIntegerField(verbose_name='Record ID')),
                ('comment', models.TextField(blank=True, default='', verbose_name='Тайлбар')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Огноо')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='workflow_audit_logs', to=settings.AUTH_USER_MODEL, verbose_name='Хэрэглэгч')),
            ],
            options={
                'verbose_name': 'Workflow audit log',
                'verbose_name_plural': 'Workflow audit logs',
                'ordering': ['-created_at', '-id'],
                'indexes': [models.Index(fields=['model_name', 'record_id'], name='inventory_w_model_n_dd0705_idx'), models.Index(fields=['action'], name='inventory_w_action_e7a471_idx'), models.Index(fields=['created_at'], name='inventory_w_created_2a3a92_idx')],
            },
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='self_verified',
            field=models.BooleanField(default=False, verbose_name='Аймаг өөрөө баталсан'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='central_verified',
            field=models.BooleanField(default=False, verbose_name='Төвөөр баталгаажсан'),
        ),
        migrations.AddField(
            model_name='maintenanceservice',
            name='central_review_required',
            field=models.BooleanField(default=False, verbose_name='Төвийн баталгаа шаардлагатай'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='self_verified',
            field=models.BooleanField(default=False, verbose_name='Аймаг өөрөө баталсан'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='central_verified',
            field=models.BooleanField(default=False, verbose_name='Төвөөр баталгаажсан'),
        ),
        migrations.AddField(
            model_name='controladjustment',
            name='central_review_required',
            field=models.BooleanField(default=False, verbose_name='Төвийн баталгаа шаардлагатай'),
        ),
        migrations.CreateModel(
            name='WorkflowDailyAgg',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('day', models.DateField(db_index=True, verbose_name='Огноо (өдөр)')),
                ('kind', models.CharField(blank=True, default='', max_length=20, verbose_name='Device kind')),
                ('location_type', models.CharField(blank=True, default='', max_length=20, verbose_name='Location type')),
                ('ms_submitted', models.PositiveIntegerField(default=0)),
                ('ms_approved', models.PositiveIntegerField(default=0)),
                ('ms_rejected', models.PositiveIntegerField(default=0)),
                ('ca_submitted', models.PositiveIntegerField(default=0)),
                ('ca_approved', models.PositiveIntegerField(default=0)),
                ('ca_rejected', models.PositiveIntegerField(default=0)),
                ('sla_avg_hours', models.FloatField(default=0.0)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('aimag', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='workflow_daily_aggs', to='inventory.aimag')),
            ],
            options={
                'verbose_name': 'Workflow daily aggregation',
                'verbose_name_plural': 'Workflow daily aggregations',
                'unique_together': {('day', 'aimag', 'kind', 'location_type')},
                'indexes': [models.Index(fields=['day'], name='inventory_wo_day_7b7b4a_idx'), models.Index(fields=['day', 'aimag'], name='inventory_wo_day_ai_4b3d30_idx'), models.Index(fields=['day', 'kind'], name='inventory_wo_day_ki_35b3fd_idx'), models.Index(fields=['day', 'location_type'], name='inventory_wo_day_lo_c4e5bb_idx')],
            },
        ),
        migrations.CreateModel(
            name='DeviceMovement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('moved_at', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Шилжүүлсэн огноо/цаг')),
                ('reason', models.CharField(blank=True, default='', max_length=255, verbose_name='Шалтгаан')),
            ],
            options={
                'verbose_name': 'Багаж шилжилт (түүх)',
                'verbose_name_plural': 'Багаж шилжилтийн түүх',
                'ordering': ['-moved_at', '-id'],
            },
        ),
        migrations.AlterModelOptions(
            name='device',
            options={},
        ),
        migrations.RenameIndex(
            model_name='workflowdailyagg',
            new_name='inventory_w_day_a8dfb1_idx',
            old_name='inventory_wo_day_7b7b4a_idx',
        ),
        migrations.RenameIndex(
            model_name='workflowdailyagg',
            new_name='inventory_w_day_4cc9e2_idx',
            old_name='inventory_wo_day_ai_4b3d30_idx',
        ),
        migrations.RenameIndex(
            model_name='workflowdailyagg',
            new_name='inventory_w_day_56e13e_idx',
            old_name='inventory_wo_day_ki_35b3fd_idx',
        ),
        migrations.RenameIndex(
            model_name='workflowdailyagg',
            new_name='inventory_w_day_7d1658_idx',
            old_name='inventory_wo_day_lo_c4e5bb_idx',
        ),
        migrations.AddField(
            model_name='device',
            name='qr_image',
            field=models.ImageField(blank=True, null=True, upload_to='qr/devices/', verbose_name='QR зураг'),
        ),
        migrations.AddField(
            model_name='devicemovement',
            name='device',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='movements', to='inventory.device', verbose_name='Багаж'),
        ),
        migrations.AddField(
            model_name='devicemovement',
            name='from_location',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='moved_from', to='inventory.location', verbose_name='Хаанаас'),
        ),
        migrations.AddField(
            model_name='devicemovement',
            name='moved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_movements', to='inventory.userprofile', verbose_name='Шилжүүлсэн (UserProfile)'),
        ),
        migrations.AddField(
            model_name='devicemovement',
            name='to_location',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='moved_to', to='inventory.location', verbose_name='Хаашаа'),
        ),
        migrations.AddIndex(
            model_name='devicemovement',
            index=models.Index(fields=['moved_at'], name='inventory_d_moved_a_67929c_idx'),
        ),
        migrations.AddIndex(
            model_name='devicemovement',
            index=models.Index(fields=['device', 'moved_at'], name='inventory_d_device__b4dcf5_idx'),
        ),
        migrations.AlterModelOptions(
            name='device',
            options={'verbose_name': 'Хэмжих хэрэгсэл', 'verbose_name_plural': 'Хэмжих хэрэгсэл'},
        ),
        migrations.AddField(
            model_name='device',
            name='qr_token',
            field=models.UUIDField(blank=True, db_index=True, editable=False, null=True, verbose_name='QR токен'),
        ),
        migrations.RunPython(
            code=backfill_0029_qr_tokens,
            reverse_code=django.db.migrations.operations.special.RunPython.noop,
        ),
        migrations.AlterField(
            model_name='device',
            name='qr_token',
            field=models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True, verbose_name='QR токен'),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='device',
            name='qr_expires_at',
            field=models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='QR хүчинтэй хугацаа'),
        ),
        migrations.AddField(
            model_name='device',
            name='qr_revoked_at',
            field=models.DateTimeField(blank=True, db_index=True, null=True, verbose_name='QR хүчингүй болгосон огноо'),
        ),
        migrations.RunPython(
            code=backfill_0030_qr_expiry,
            reverse_code=django.db.migrations.operations.special.RunPython.noop,
        ),
        migrations.AlterField(
            model_name='device',
            name='qr_token',
            field=models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True, verbose_name='QR токен'),
        ),
        migrations.AddField(
            model_name='instrumentcatalog',
            name='verification_cycle_months',
            field=models.PositiveIntegerField(default=12, help_text='Device.last_verification_date дээр үндэслэн next_verification_date автоматаар тооцоход ашиглана.', verbose_name='Баталгаажуулалт/калибровка цикл (сар)'),
        ),
        migrations.CreateModel(
            name='CalibrationWorkflow',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('due_date', models.DateField(db_index=True, verbose_name='Калибровка дуусах/дууссан огноо')),
                ('note', models.TextField(blank=True, default='', verbose_name='Тайлбар')),
                ('workflow_status', models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв')),
                ('submitted_at', models.DateTimeField(blank=True, null=True, verbose_name='Илгээсэн огноо')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Баталсан огноо')),
                ('rejected_at', models.DateTimeField(blank=True, null=True, verbose_name='Татгалзсан огноо')),
                ('reject_reason', models.TextField(blank=True, default='', verbose_name='Reject шалтгаан')),
                ('self_verified', models.BooleanField(default=False, verbose_name='Аймаг өөрөө баталсан')),
                ('central_verified', models.BooleanField(default=False, verbose_name='Төвөөр баталгаажсан')),
                ('central_review_required', models.BooleanField(default=False, verbose_name='Төвийн баталгаа шаардлагатай')),
                ('is_closed', models.BooleanField(db_index=True, default=False, verbose_name='Хаагдсан эсэх')),
                ('closed_at', models.DateTimeField(blank=True, null=True, verbose_name='Хаасан огноо')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cal_approved', to=settings.AUTH_USER_MODEL, verbose_name='Баталсан хэрэглэгч')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='calibration_cases', to='inventory.device', verbose_name='Багаж')),
                ('rejected_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cal_rejected', to=settings.AUTH_USER_MODEL, verbose_name='Татгалзсан хэрэглэгч')),
                ('submitted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cal_submitted', to=settings.AUTH_USER_MODEL, verbose_name='Илгээсэн хэрэглэгч')),
            ],
            options={
                'verbose_name': 'Калибровка (workflow)',
                'verbose_name_plural': 'Калибровка (workflow)',
                'ordering': ['-created_at', '-id'],
                'permissions': [('can_approve_workflow', 'Can approve/reject workflow')],
                'indexes': [models.Index(fields=['due_date'], name='inventory_c_due_dat_ac7afc_idx'), models.Index(fields=['workflow_status'], name='inventory_c_workflo_8a04d7_idx'), models.Index(fields=['is_closed', 'due_date'], name='inventory_c_is_clos_3dc807_idx')],
            },
        ),
        migrations.AddField(
            model_name='device',
            name='last_verification_date',
            field=models.DateField(blank=True, null=True, verbose_name='Сүүлийн калибровка'),
        ),
        migrations.AddField(
            model_name='device',
            name='next_verification_date',
            field=models.DateField(blank=True, db_index=True, null=True, verbose_name='Дараагийн калибровка'),
        ),
        migrations.AddField(
            model_name='device',
            name='last_verification_date',
            field=models.DateField(blank=True, null=True, verbose_name='Сүүлд шалгасан/калибровка'),
        ),
        migrations.AddField(
            model_name='device',
            name='next_verification_date',
            field=models.DateField(blank=True, db_index=True, null=True, verbose_name='Дараагийн шалгалтын огноо'),
        ),
        migrations.AddField(
            model_name='instrumentcatalog',
            name='verification_cycle_months',
            field=models.PositiveIntegerField(default=0, help_text='0 бол автоматаар тооцохгүй (manual). Ж: 12 = жил бүр.', verbose_name='Шалгалт/калибровкийн цикл (сар)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Ноорог'), ('SUBMITTED', 'Хянагдахаар илгээсэн'), ('APPROVED', 'Батлагдсан'), ('REJECTED', 'Татгалзсан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Ноорог'), ('SUBMITTED', 'Хянагдахаар илгээсэн'), ('APPROVED', 'Батлагдсан'), ('REJECTED', 'Татгалзсан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.DeleteModel(
            name='CalibrationWorkflow',
        ),
        migrations.AddField(
            model_name='device',
            name='commissioned_date',
            field=models.DateField(blank=True, null=True, verbose_name='Ашиглалтад орсон огноо'),
        ),
        migrations.AddField(
            model_name='device',
            name='inventory_code',
            field=models.CharField(blank=True, max_length=100, null=True, verbose_name='Бараа материалын код'),
        ),
        migrations.AddField(
            model_name='device',
            name='manufacturer',
            field=models.CharField(blank=True, max_length=100, null=True, verbose_name='Үйлдвэрлэгч'),
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='WEATHER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'ХАА'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='OTHER', max_length=20, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='location',
            name='location_type',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'ХАА'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='WEATHER', max_length=16, verbose_name='Байршлын төрөл'),
        ),
        migrations.RemoveField(
            model_name='device',
            name='qr_expires_at',
        ),
        migrations.RemoveField(
            model_name='device',
            name='qr_revoked_at',
        ),
        migrations.AlterField(
            model_name='device',
            name='qr_image',
            field=models.ImageField(blank=True, null=True, upload_to='qr/'),
        ),
        migrations.AlterField(
            model_name='device',
            name='qr_token',
            field=models.UUIDField(default=uuid.uuid4, editable=False, unique=True),
        ),
        migrations.AlterModelOptions(
            name='aimag',
            options={'verbose_name': 'Аймаг', 'verbose_name_plural': 'Аймаг'},
        ),
        migrations.AlterModelOptions(
            name='authauditlog',
            options={'verbose_name': 'Нэвтрэлтийн лог', 'verbose_name_plural': 'Нэвтрэлтийн лог'},
        ),
        migrations.AlterModelOptions(
            name='controladjustment',
            options={'verbose_name': 'Хяналт тохируулга', 'verbose_name_plural': 'Хяналт тохируулга'},
        ),
        migrations.AlterModelOptions(
            name='controlevidence',
            options={'verbose_name': 'Хяналтын нотолгоо', 'verbose_name_plural': 'Хяналтын нотолгоо'},
        ),
        migrations.AlterModelOptions(
            name='device',
            options={'verbose_name': 'Багаж', 'verbose_name_plural': 'Багаж'},
        ),
        migrations.AlterModelOptions(
            name='devicemovement',
            options={'verbose_name': 'Шилжилт', 'verbose_name_plural': 'Шилжилт'},
        ),
        migrations.AlterModelOptions(
            name='instrumentcatalog',
            options={'verbose_name': 'Каталог', 'verbose_name_plural': 'Каталог'},
        ),
        migrations.AlterModelOptions(
            name='location',
            options={'verbose_name': 'Байршил', 'verbose_name_plural': 'Байршил'},
        ),
        migrations.AlterModelOptions(
            name='maintenanceevidence',
            options={'verbose_name': 'Засварын нотолгоо', 'verbose_name_plural': 'Засварын нотолгоо'},
        ),
        migrations.AlterModelOptions(
            name='maintenanceservice',
            options={'verbose_name': 'Засвар үйлчилгээ', 'verbose_name_plural': 'Засвар үйлчилгээ'},
        ),
        migrations.AlterModelOptions(
            name='organization',
            options={'verbose_name': 'Байгууллага', 'verbose_name_plural': 'Байгууллагууд'},
        ),
        migrations.AlterModelOptions(
            name='sparepartitem',
            options={'verbose_name': 'Сэлбэг (мөр)', 'verbose_name_plural': 'Сэлбэг (мөр)'},
        ),
        migrations.AlterModelOptions(
            name='sparepartorder',
            options={'verbose_name': 'Сэлбэгийн захиалга', 'verbose_name_plural': 'Сэлбэгийн захиалга'},
        ),
        migrations.AlterModelOptions(
            name='sumduureg',
            options={'ordering': ['aimag_ref__name', 'name'], 'verbose_name': 'Сум / Дүүрэг', 'verbose_name_plural': 'Сум / Дүүргүүд'},
        ),
        migrations.AlterModelOptions(
            name='userprofile',
            options={'verbose_name': 'Профайл', 'verbose_name_plural': 'Профайл'},
        ),
        migrations.RemoveField(
            model_name='organization',
            name='aimag',
        ),
        migrations.RemoveField(
            model_name='sumduureg',
            name='aimag',
        ),
        migrations.AddField(
            model_name='organization',
            name='aimag_ref',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='organizations', to='inventory.aimag', verbose_name='Аймаг/Улаанбаатар'),
        ),
        migrations.AddField(
            model_name='sumduureg',
            name='aimag_ref',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sums', to='inventory.aimag', verbose_name='Аймаг/Улаанбаатар'),
        ),
        migrations.AddField(
            model_name='sumduureg',
            name='code',
            field=models.CharField(blank=True, db_index=True, help_text='Албан ёсны сум/дүүргийн код (ж: 011, 123, UB-01 гэх мэт)', max_length=10, null=True, verbose_name='Код'),
        ),
        migrations.AlterField(
            model_name='aimag',
            name='code',
            field=models.CharField(blank=True, default='', max_length=20, verbose_name='Код'),
        ),
        migrations.AlterField(
            model_name='aimag',
            name='name',
            field=models.CharField(max_length=120, verbose_name='Аймаг/Хот'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='date',
            field=models.DateField(default=django.utils.timezone.localdate, verbose_name='Огноо'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='device',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='control_adjustments', to='inventory.device', verbose_name='Багаж / Төхөөрөмж'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='note',
            field=models.TextField(blank=True, default='', verbose_name='Тайлбар / тэмдэглэл'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='performer_engineer_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нэр)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='performer_org_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нэр)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='performer_type',
            field=models.CharField(blank=True, choices=[('ENGINEER', 'Инженер'), ('ORG', 'Байгууллага')], default='ENGINEER', max_length=20, verbose_name='Хийсэн этгээд (төрөл)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='result',
            field=models.CharField(choices=[('PASS', 'PASS - Хэвийн'), ('LIMITED', 'Хязгаарлагдмал'), ('FAIL', 'FAIL - Ажиллагаагүй')], default='PASS', max_length=20, verbose_name='Үр дүн'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Ноорог'), ('SUBMITTED', 'Хянагдахаар илгээгдсэн'), ('APPROVED', 'Батлагдсан'), ('REJECTED', 'Татгалзсан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterField(
            model_name='controlevidence',
            name='adjustment',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='inventory.controladjustment', verbose_name='Тохируулга'),
        ),
        migrations.AlterField(
            model_name='device',
            name='catalog_item',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='devices', to='inventory.instrumentcatalog', verbose_name='ДЦУБ жагсаалт'),
        ),
        migrations.AlterField(
            model_name='device',
            name='installation_date',
            field=models.DateField(blank=True, null=True, verbose_name='Суурилуулсан'),
        ),
        migrations.AlterField(
            model_name='device',
            name='inventory_code',
            field=models.CharField(blank=True, default='', max_length=120, verbose_name='Дотоод код'),
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'ХАА'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='OTHER', max_length=16, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='device',
            name='last_verification_date',
            field=models.DateField(blank=True, null=True, verbose_name='Сүүлд шалгасан/калибровка'),
        ),
        migrations.AlterField(
            model_name='device',
            name='lifespan_years',
            field=models.PositiveIntegerField(default=10, verbose_name='Ашиглалтын хугацаа (жил)'),
        ),
        migrations.AlterField(
            model_name='device',
            name='location',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='devices', to='inventory.location', verbose_name='Байршил'),
        ),
        migrations.AlterField(
            model_name='device',
            name='next_verification_date',
            field=models.DateField(blank=True, null=True, verbose_name='Дараагийн шалгалт/калибровка'),
        ),
        migrations.AlterField(
            model_name='device',
            name='other_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Бусад нэр'),
        ),
        migrations.AlterField(
            model_name='device',
            name='serial_number',
            field=models.CharField(blank=True, default='', max_length=120, verbose_name='Серийн дугаар'),
        ),
        migrations.AlterField(
            model_name='device',
            name='status',
            field=models.CharField(choices=[('Active', 'Ашиглаж байна'), ('Inactive', 'Идэвхгүй'), ('Broken', 'Эвдэрсэн'), ('Archived', 'Архивласан')], default='Active', max_length=15, verbose_name='Төлөв'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='code',
            field=models.CharField(max_length=50, unique=True, verbose_name='Код'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='is_active',
            field=models.BooleanField(default=True, verbose_name='Идэвхтэй'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'ХАА'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='OTHER', max_length=16),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='name_mn',
            field=models.CharField(max_length=255, verbose_name='Нэр (MN)'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='unit',
            field=models.CharField(blank=True, default='', max_length=50, verbose_name='Нэгж'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='verification_cycle_months',
            field=models.PositiveIntegerField(default=12, verbose_name='Шалгалт/калибровкийн цикл (сар)'),
        ),
        migrations.AlterField(
            model_name='location',
            name='aimag_ref',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.aimag', verbose_name='Аймаг'),
        ),
        migrations.AlterField(
            model_name='location',
            name='district_name',
            field=models.CharField(blank=True, default='', max_length=100, verbose_name='УБ дүүрэг'),
        ),
        migrations.AlterField(
            model_name='location',
            name='latitude',
            field=models.FloatField(blank=True, null=True, verbose_name='Өргөрөг'),
        ),
        migrations.AlterField(
            model_name='location',
            name='location_type',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'ХАА'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='WEATHER', max_length=16, verbose_name='Байршлын төрөл'),
        ),
        migrations.AlterField(
            model_name='location',
            name='longitude',
            field=models.FloatField(blank=True, null=True, verbose_name='Уртраг'),
        ),
        migrations.AlterField(
            model_name='location',
            name='name',
            field=models.CharField(max_length=255, verbose_name='Нэр'),
        ),
        migrations.AlterField(
            model_name='location',
            name='owner_org',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.organization', verbose_name='Хариуцагч'),
        ),
        migrations.AlterField(
            model_name='location',
            name='sum_ref',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.sumduureg', verbose_name='Сум/Дүүрэг'),
        ),
        migrations.AlterField(
            model_name='location',
            name='wmo_index',
            field=models.CharField(blank=True, max_length=10, null=True, verbose_name='WMO индекс'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='date',
            field=models.DateField(default=django.utils.timezone.localdate, verbose_name='Огноо'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='device',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='maintenance_services', to='inventory.device', verbose_name='Багаж / Төхөөрөмж'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='note',
            field=models.TextField(blank=True, default='', verbose_name='Тайлбар / тэмдэглэл'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='performer_engineer_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нэр)'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='performer_org_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нэр)'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='performer_type',
            field=models.CharField(blank=True, choices=[('ENGINEER', 'Инженер'), ('ORG', 'Байгууллага')], default='ENGINEER', max_length=20, verbose_name='Хийсэн этгээд (төрөл)'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='reason',
            field=models.CharField(choices=[('NORMAL', 'Хэвийн засвар үйлчилгээ'), ('LIMITED', 'Хязгаарлагдмал ажиллагаа'), ('NOT_WORKING', 'Ажиллагаагүй болсон')], default='NORMAL', max_length=20, verbose_name='Засвар хийсэн шалтгаан'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Ноорог'), ('SUBMITTED', 'Хянагдахаар илгээгдсэн'), ('APPROVED', 'Батлагдсан'), ('REJECTED', 'Татгалзсан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='is_ub',
            field=models.BooleanField(default=False, verbose_name='УБ эсэх'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='name',
            field=models.CharField(max_length=255, verbose_name='Байгууллага'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='org_type',
            field=models.CharField(choices=[('OBS_CENTER', 'УЦУОШТ'), ('CAL_LAB', 'БОХЗТ лаборатори'), ('HQ', 'ЦУОШГ'), ('OTHER', 'Бусад')], db_index=True, default='OTHER', max_length=20),
        ),
        migrations.AlterField(
            model_name='sumduureg',
            name='is_ub_district',
            field=models.BooleanField(default=False, verbose_name='УБ дүүрэг эсэх'),
        ),
        migrations.AlterField(
            model_name='sumduureg',
            name='name',
            field=models.CharField(max_length=150, verbose_name='Нэр'),
        ),
        migrations.CreateModel(
            name='MeasurementSystem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('system_type', models.CharField(choices=[('RADAR', 'Weather Radar'), ('AEROLOGY', 'Aerological Station'), ('AWS', 'Automatic Weather Station')], max_length=20)),
                ('status', models.CharField(choices=[('OPERATIONAL', 'Operational'), ('DEGRADED', 'Degraded'), ('DOWN', 'Down')], default='OPERATIONAL', max_length=20)),
                ('installed_date', models.DateField(blank=True, null=True)),
                ('note', models.TextField(blank=True, default='')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='systems', to='inventory.location')),
                ('owner_org', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='systems', to='inventory.organization')),
            ],
        ),
        migrations.AddField(
            model_name='device',
            name='system',
            field=models.ForeignKey(blank=True, help_text='Radar / Aerology / AWS system this device belongs to', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='components', to='inventory.measurementsystem'),
        ),
        migrations.AlterModelOptions(
            name='controladjustment',
            options={'verbose_name': 'яХналт тохируулга', 'verbose_name_plural': 'Хяналт тохируулга'},
        ),
        migrations.AlterModelOptions(
            name='controlevidence',
            options={'verbose_name': 'Тохируулагын нотолгоо', 'verbose_name_plural': 'Тохируулагын нотолгоо'},
        ),
        migrations.AlterModelOptions(
            name='maintenanceservice',
            options={'verbose_name': 'Завар үйлчилгээ', 'verbose_name_plural': 'Завар үйлчилгээ'},
        ),
        migrations.AddField(
            model_name='location',
            name='parent_location',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='child_locations', to='inventory.location', verbose_name='Дэд байршил (эх станц)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='performer_engineer_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нр)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='performer_org_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нр)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='result',
            field=models.CharField(choices=[('PASS', 'PASS - Хэвийн'), ('LIMITED', 'Хзгаарлагдмал'), ('FAIL', 'FAIL - Ажиллагаагүй')], default='PASS', max_length=20, verbose_name='Үр дүн'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'оорог'), ('SUBMITTED', 'Хянагдахаар илгээгдсэн'), ('APPROVED', 'Батлагдан'), ('REJECTED', 'Татгалзан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterField(
            model_name='device',
            name='catalog_item',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='devices', to='inventory.instrumentcatalog', verbose_name='ДЦУБ жагаалт'),
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Усудлал'), ('AWS', 'AWS'), ('RADAR', 'Радар'), ('AEROLOGY', 'рологи'), ('AGRO', 'Х'), ('ETALON', 'Эталон'), ('OTHER', 'Буад')], db_index=True, default='OTHER', max_length=16, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='device',
            name='status',
            field=models.CharField(choices=[('Active', 'Ашиглаж байна'), ('Inactive', 'Идэвхгүй'), ('Broken', 'Эвдэрсэн'), ('Archived', 'Архивлсан')], default='Active', max_length=15, verbose_name='Төлөв'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус удлал'), ('AWS', 'Aвтомат станц'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('ETALON', 'Эталон'), ('OTHER', 'Буад')], db_index=True, default='OTHER', max_length=16),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='name_mn',
            field=models.CharField(max_length=255, verbose_name='р (MN)'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='unit',
            field=models.CharField(blank=True, default='', max_length=50, verbose_name='гж'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='verification_cycle_months',
            field=models.PositiveIntegerField(default=12, verbose_name='Шалгалт/калибровкийн цикл (ар)'),
        ),
        migrations.AlterField(
            model_name='location',
            name='location_type',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус удлал'), ('AWS', 'Aвтомат станц'), ('RADAR', 'Радар'), ('AEROLOGY', 'рологи'), ('AGRO', 'Хөдөө аж ахуй'), ('ETALON', 'Эталон'), ('OTHER', 'Буад')], db_index=True, default='WEATHER', max_length=16, verbose_name='Байршлын төрөл'),
        ),
        migrations.AlterField(
            model_name='location',
            name='name',
            field=models.CharField(max_length=255, verbose_name='р'),
        ),
        migrations.AlterField(
            model_name='location',
            name='sum_ref',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='inventory.sumduureg', verbose_name='Сум/Дүүрг'),
        ),
        migrations.AlterField(
            model_name='location',
            name='wmo_index',
            field=models.CharField(blank=True, max_length=10, null=True, verbose_name='WMO индек'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='performer_engineer_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нр)'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='performer_org_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нр)'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='reason',
            field=models.CharField(choices=[('NORMAL', 'Хвийн завар үйлчилгээ'), ('LIMITED', 'Хзгаарлагдмал ажиллагаа'), ('NOT_WORKING', 'Ажиллагаагүй болон')], default='NORMAL', max_length=20, verbose_name='Завар хийсэн шалтгаан'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'оорог'), ('SUBMITTED', 'Хянагдахаар илгээгдсэн'), ('APPROVED', 'Батлагдан'), ('REJECTED', 'Татгалзан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='is_ub',
            field=models.BooleanField(default=False, verbose_name='УБ х'),
        ),
        migrations.AlterField(
            model_name='organization',
            name='org_type',
            field=models.CharField(choices=[('OBS_CENTER', 'УЦУОШТ'), ('CAL_LAB', 'БОХЗТ лаборатори'), ('HQ', 'ЦУОШГ'), ('OTHER', 'Буад')], db_index=True, default='OTHER', max_length=20),
        ),
        migrations.AlterField(
            model_name='sumduureg',
            name='code',
            field=models.CharField(blank=True, db_index=True, help_text='Албан ёсны сум/дүүргийн код (ж: 011, 123, UB-01 гх мт)', max_length=10, null=True, verbose_name='Код'),
        ),
        migrations.AlterField(
            model_name='sumduureg',
            name='is_ub_district',
            field=models.BooleanField(default=False, verbose_name='УБ дүүрэг'),
        ),
        migrations.AlterField(
            model_name='sumduureg',
            name='name',
            field=models.CharField(max_length=150, verbose_name='р'),
        ),
        migrations.AlterModelOptions(
            name='aimag',
            options={'ordering': ['name'], 'verbose_name': 'Аймаг', 'verbose_name_plural': 'Аймгууд'},
        ),
        migrations.AlterModelOptions(
            name='controladjustment',
            options={'verbose_name': 'Хяналт тохируулга', 'verbose_name_plural': 'Хяналт тохируулга'},
        ),
        migrations.AlterModelOptions(
            name='maintenanceservice',
            options={'verbose_name': 'Засвар үйлчилгээ', 'verbose_name_plural': 'Завар үйлчилгээ'},
        ),
        migrations.AlterField(
            model_name='aimag',
            name='name',
            field=models.CharField(max_length=100, unique=True, verbose_name='Аймаг'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='performer_engineer_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нэр)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='performer_org_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нэр)'),
        ),
        migrations.AlterField(
            model_name='controladjustment',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Ноорог'), ('SUBMITTED', 'Хянагдахаар илгээгдсэн'), ('APPROVED', 'Батлагдсан'), ('REJECTED', 'Татгалзсан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterField(
            model_name='device',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'Автомат станц'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='OTHER', max_length=16, verbose_name='Төрөл'),
        ),
        migrations.AlterField(
            model_name='instrumentcatalog',
            name='kind',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'Автомат станц'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='OTHER', max_length=16),
        ),
        migrations.AlterField(
            model_name='location',
            name='location_type',
            field=models.CharField(choices=[('WEATHER', 'Цаг уур'), ('HYDRO', 'Ус судлал'), ('AWS', 'Автомат станц'), ('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AGRO', 'Хөдөө аж ахуй'), ('ETALON', 'Эталон'), ('OTHER', 'Бусад')], db_index=True, default='WEATHER', max_length=16, verbose_name='Байршлын төрөл'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='performer_engineer_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн инженер (нэр)'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='performer_org_name',
            field=models.CharField(blank=True, default='', max_length=255, verbose_name='Хийсэн байгууллага (нэр)'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='reason',
            field=models.CharField(choices=[('NORMAL', 'Хэвийн засвар үйлчилгээ'), ('LIMITED', 'Хзгаарлагдмал ажиллагаа'), ('NOT_WORKING', 'Ажиллагаагүй болон')], default='NORMAL', max_length=20, verbose_name='Засвар хийсэн шалтгаан'),
        ),
        migrations.AlterField(
            model_name='maintenanceservice',
            name='workflow_status',
            field=models.CharField(choices=[('DRAFT', 'Ноорог'), ('SUBMITTED', 'Хянагдахаар илгээгдсэн'), ('APPROVED', 'Батлагдсан'), ('REJECTED', 'Татгалзсан')], default='DRAFT', max_length=12, verbose_name='Workflow төлөв'),
        ),
        migrations.AlterModelOptions(
            name='measurementsystem',
            options={'verbose_name': 'Систем', 'verbose_name_plural': 'Системүүд'},
        ),
        migrations.AlterField(
            model_name='measurementsystem',
            name='installed_date',
            field=models.DateField(blank=True, null=True, verbose_name='Суурилуулсан огноо'),
        ),
        migrations.AlterField(
            model_name='measurementsystem',
            name='location',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='systems', to='inventory.location', verbose_name='Байршил'),
        ),
        migrations.AlterField(
            model_name='measurementsystem',
            name='name',
            field=models.CharField(max_length=255, verbose_name='Системийн нэр'),
        ),
        migrations.AlterField(
            model_name='measurementsystem',
            name='note',
            field=models.TextField(blank=True, default='', verbose_name='Тайлбар'),
        ),
        migrations.AlterField(
            model_name='measurementsystem',
            name='owner_org',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='systems', to='inventory.organization', verbose_name='Хариуцагч байгууллага'),
        ),
        migrations.AlterField(
            model_name='measurementsystem',
            name='status',
            field=models.CharField(choices=[('OPERATIONAL', 'Ажиллаж байна'), ('DEGRADED', 'Хязгаарлагдмал'), ('DOWN', 'Ажиллахгүй')], default='OPERATIONAL', max_length=20, verbose_name='Төлөв'),
        ),
        migrations.AlterField(
            model_name='measurementsystem',
            name='system_type',
            field=models.CharField(choices=[('RADAR', 'Радар'), ('AEROLOGY', 'Аэрологи'), ('AWS', 'Автомат станц')], max_length=20, verbose_name='Системийн төрөл'),
        ),
        migrations.RunPython(
            code=backfill_0046_device_system_links,
            reverse_code=django.db.migrations.operations.special.RunPython.noop,
        ),
    ]
